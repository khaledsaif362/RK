<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Indian Recipes ‚Ä¢ Single‚ÄëPage HTML App</title>
  <style>
    :root{
      --bg:#0f1220; --card:#151936; --muted:#aab2d5; --text:#e7ebff; --brand:#6c79ff; --brand-2:#ff6cc8;
      --good:#35d07f; --warn:#ffd166; --chip:#20264f; --chip-b:#2a3170; --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 10% -10%, rgba(108,121,255,.25), transparent),
                  radial-gradient(900px 500px at 120% 10%, rgba(255,108,200,.20), transparent),
                  var(--bg);
      color:var(--text);
    }
    header{
      position:sticky; top:0; z-index:5; backdrop-filter:saturate(1.2) blur(10px);
      background:linear-gradient(180deg, rgba(15,18,32,.9), rgba(15,18,32,.6)); border-bottom:1px solid #262b55;
    }
    .wrap{max-width:1200px; margin:0 auto; padding:20px}
    .title{
      display:flex; gap:16px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    }
    h1{margin:0; font-size: clamp(20px, 1.8rem, 48px); letter-spacing:.3px}
    .subtitle{color:var(--muted); font-size:.95rem}
    .controls{
      margin-top:14px; display:grid; grid-template-columns: 1fr repeat(4, minmax(140px, 190px)); gap:10px; align-items:center;
    }
    input[type="search"], select{
      width:100%; padding:12px 14px; border-radius:14px; border:1px solid #2a2f66; background:#121630; color:var(--text);
      outline:none; box-shadow: inset 0 0 0 1px transparent; transition:.2s ease; font-size:15px;
    }
    input[type="search"]:focus, select:focus{ box-shadow: inset 0 0 0 1px var(--brand) }
    .chips{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px }
    .chip{ background: linear-gradient(180deg, var(--chip), var(--chip-b)); color:#cfd6ff; border:1px solid #2e3578; padding:6px 10px; border-radius:999px; font-size:.85rem; cursor:pointer; user-select:none }
    .chip.active{ outline:2px solid var(--brand); color:#fff }main{ padding:18px 0 40px }
.grid{ display:grid; grid-template-columns: repeat( auto-fill, minmax(260px, 1fr)); gap:16px }
.card{
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); border:1px solid #252b58;
  border-radius:18px; padding:14px; box-shadow: var(--shadow); position:relative; overflow:hidden;
}
.ribbon{position:absolute; top:12px; right:-8px; background:linear-gradient(120deg, var(--brand), var(--brand-2)); color:#fff; padding:6px 14px; border-radius:999px; font-size:.72rem; transform:rotate(10deg)}
.card h3{margin:6px 0 4px; font-size:1.1rem}
.meta{ display:flex; align-items:center; gap:10px; color:#c8cdf5; font-size:.86rem; flex-wrap:wrap }
.dot{ width:8px; height:8px; border-radius:50%; background:var(--good); display:inline-block }
.nonveg{ background:#ff5c63 }
.badge{ padding:4px 8px; border:1px solid #333a7a; border-radius:999px; font-size:.72rem }
.spice{letter-spacing:1px}
.card .tags{ margin-top:10px; display:flex; gap:6px; flex-wrap:wrap }
.tag{ background:#18204a; color:#c6ccff; padding:4px 8px; border-radius:8px; font-size:.72rem; border:1px solid #2a3274 }
.actions{ display:flex; gap:8px; margin-top:12px }
button{ cursor:pointer; border:1px solid #323975; background:#111537; color:#e8ebff; padding:8px 10px; border-radius:12px; font-weight:600 }
button:hover{ filter:brightness(1.1) }
.ghost{ background:transparent }
.like{ border-color:#3c8d62 }
.danger{ border-color:#7e344e }

.empty{ text-align:center; color:#b8bfe9; padding:40px; border:1px dashed #2e3577; border-radius:16px; background:rgba(255,255,255,.02) }

/* Modal */
dialog{ width:min(860px, 95vw); border:none; border-radius:18px; padding:0; overflow:hidden; background:#0f1433; color:#eef0ff; box-shadow: var(--shadow) }
dialog::backdrop{ background: rgba(2,6,23,.72) }
.modalHead{ display:flex; align-items:center; justify-content:space-between; padding:16px 18px; border-bottom:1px solid #2a3170; background:linear-gradient(180deg,#121741,#0e1335) }
.modalBody{ display:grid; grid-template-columns: 1.2fr 1fr; gap:18px; padding:18px }
.modalBody h4{ margin:6px 0 }
.section{ background:#0b1030; padding:12px 14px; border:1px solid #242b67; border-radius:14px }
ol, ul{ margin:8px 0 0 18px }
.modalFoot{ display:flex; gap:10px; padding:14px 18px; border-top:1px solid #2a3170; background:#0d1231; justify-content:flex-end }

/* Footer */
footer{ border-top:1px solid #262b55; color:#aeb6e9; padding:18px; text-align:center; font-size:.9rem }

/* Responsive */
@media (max-width:820px){ .controls{ grid-template-columns: 1fr 1fr 1fr; } .modalBody{ grid-template-columns:1fr } }
@media (max-width:540px){ .controls{ grid-template-columns:1fr 1fr; } }

  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="title">
        <div>
          <h1>üçõ Indian Recipes</h1>
          <div class="subtitle">Search ‚Ä¢ Filter ‚Ä¢ Save favourites ‚Ä¢ Print or copy ingredients. All offline in one HTML file.</div>
        </div>
        <div class="chips" id="quickChips"></div>
      </div>
      <div class="controls">
        <input id="q" type="search" placeholder="Search dishes, ingredients‚Ä¶ (e.g., paneer, biryani, dosa)" aria-label="Search recipes" />
        <select id="course">
          <option value="">All Courses</option>
          <option>Breakfast</option>
          <option>Main</option>
          <option>Snack</option>
          <option>Bread</option>
          <option>Rice</option>
          <option>Dessert</option>
          <option>Beverage</option>
        </select>
        <select id="diet">
          <option value="">Diet: Any</option>
          <option>Veg</option>
          <option>Non-Veg</option>
          <option>Vegan</option>
        </select>
        <select id="region">
          <option value="">Region: Any</option>
          <option>North</option>
          <option>South</option>
          <option>East</option>
          <option>West</option>
          <option>Coastal</option>
          <option>Pan-India</option>
        </select>
        <select id="sort">
          <option value="az">Sort: A ‚Üí Z</option>
          <option value="time">Sort: Cooking Time</option>
          <option value="spice">Sort: Spice Level</option>
          <option value="popular">Sort: Popular</option>
        </select>
      </div>
    </div>
  </header>  <main class="wrap">
    <div class="grid" id="grid"></div>
    <div id="empty" class="empty" hidden>No dishes match your filters. Try clearing a filter or search term.</div>
  </main>  <footer>
    Made with ‚ù§Ô∏è ‚Äì Works offline. Tip: Tap ‚òÖ on any card to save it; use the ‚ÄúFavourites‚Äù chip on top to view them.
  </footer>  <dialog id="modal">
    <div class="modalHead">
      <strong id="mTitle">Recipe</strong>
      <div style="display:flex; gap:8px">
        <button id="copyBtn">Copy Ingredients</button>
        <button id="printBtn">Print</button>
        <button id="closeBtn" class="ghost">Close</button>
      </div>
    </div>
    <div class="modalBody">
      <section class="section">
        <h4>Ingredients</h4>
        <ul id="mIngr"></ul>
        <h4>Notes</h4>
        <div id="mNotes" class="subtitle"></div>
      </section>
      <section class="section">
        <h4>Steps</h4>
        <ol id="mSteps"></ol>
      </section>
    </div>
    <div class="modalFoot">
      <span class="subtitle" id="mMeta"></span>
    </div>
  </dialog>  <script>
    // --- Data ---------------------------------------------------------------
    const RECIPES = [
      // Breakfast
      R({name:'Masala Dosa', course:'Breakfast', region:'South', diet:'Veg', time:40, spice:3, popular:10,
        tags:['Fermented','Crispy','Udupi'],
        ingredients:['2 cups dosa batter','1 tbsp oil','1 tsp mustard seeds','1 onion, sliced','1-2 green chilies, chopped','1/2 tsp turmeric','4 boiled potatoes, crumbled','Salt','Coriander','Ghee (optional)'],
        steps:['Spread batter on hot tawa; drizzle oil/ghee.','Crackle mustard; saut√© onion & chilies.','Add turmeric, potatoes, salt; mash.','Crisp dosa, fill with masala, fold & serve with sambar & chutney.'],
        notes:'Ferment batter overnight for best flavor.'
      }),
      R({name:'Idli with Sambar', course:'Breakfast', region:'South', diet:'Veg', time:45, spice:2, popular:9,
        tags:['Steamed','Light'],
        ingredients:['2 cups idli batter','For sambar: toor dal 1/2 cup','Tamarind','Sambar powder 2 tsp','Mixed veg','Mustard seeds','Curry leaves'],
        steps:['Steam idlis 10-12 mins.','Pressure cook dal; add veggies & sambar powder.','Finish with tamarind & tempering.'],
        notes:'Grease molds for easy release.'
      }),
      R({name:'Poha', course:'Breakfast', region:'West', diet:'Veg', time:15, spice:2, popular:10,
        tags:['Quick','Light'],
        ingredients:['2 cups thick poha (flattened rice)','1 onion','1 potato (optional)','1/4 cup peanuts','Mustard seeds','Curry leaves','Turmeric','Lemon','Coriander'],
        steps:['Rinse poha; rest 5 mins.','Tempering with mustard, curry leaves; saut√© onion/potato.','Add turmeric, poha, peanuts, salt; toss.','Finish with lemon & coriander.']
      }),
      R({name:'Upma', course:'Breakfast', region:'South', diet:'Veg', time:20, spice:1, popular:8,
        tags:['Semolina','Comfort'],
        ingredients:['1 cup rava/sooji','2.5 cups water','1 onion','Green chilies','Mustard & urad dal','Curry leaves','Ghee/Oil','Salt'],
        steps:['Dry roast rava.','Tempering; saut√© onions & chilies.','Add water & salt; boil.','Rain in rava, stir till fluffy.']
      }),

      // Mains ‚Äì Veg
      R({name:'Paneer Butter Masala', course:'Main', region:'North', diet:'Veg', time:35, spice:2, popular:10,
        tags:['Creamy','Restaurant‚Äëstyle'],
        ingredients:['200g paneer cubes','2 tomatoes','1 onion','1 tsp ginger‚Äëgarlic paste','Butter & cream','Cashews 10','Kashmiri chili 1 tsp','Garam masala 1/2 tsp'],
        steps:['Saut√© onion & tomatoes with cashews; blend smooth.','Cook paste with butter & spices.','Add cream & paneer; simmer 3‚Äì4 mins.']
      }),
      R({name:'Chana Masala', course:'Main', region:'North', diet:'Vegan', time:40, spice:3, popular:9,
        tags:['Protein‚Äërich','Punjabi'],
        ingredients:['2 cups cooked chickpeas','Onion, tomato','Ginger‚Äëgarlic','Chana masala 2 tsp','Tea bag (optional)','Kasuri methi'],
        steps:['Pressure cook chickpeas (with tea bag for color).','Saut√© onion‚Äëtomato masala with spice mix.','Add chickpeas; simmer till thick; finish with methi.']
      }),
      R({name:'Dal Tadka', course:'Main', region:'North', diet:'Vegan', time:30, spice:2, popular:9,
        tags:['Comfort','Everyday'],
        ingredients:['1/2 cup toor dal + 1/4 cup moong','Turmeric','Onion, tomato','Cumin','Garlic','Ghee/Oil','Red chili'],
        steps:['Pressure cook dal with haldi.','Mash; add saut√©ed onion‚Äëtomato.','Pour hot tadka with cumin & garlic.']
      }),
      R({name:'Rajma Masala', course:'Main', region:'North', diet:'Vegan', time:50, spice:2, popular:8,
        tags:['Kidney beans','Comfort'],
        ingredients:['2 cups cooked rajma','Onion‚Äëtomato masala','Ginger‚Äëgarlic','Rajma masala 2 tsp','Butter (optional)'],
        steps:['Cook rajma till soft.','Slow‚Äësimmer in masala 15‚Äì20 mins for depth.']
      }),
      R({name:'Palak Paneer', course:'Main', region:'North', diet:'Veg', time:30, spice:2, popular:9,
        tags:['Spinach','Iron‚Äërich'],
        ingredients:['200g paneer','2 cups blanched spinach','Onion','Ginger‚Äëgarlic','Green chili','Garam masala','Cream (optional)'],
        steps:['Blanch & blend spinach.','Saut√© aromatics; add puree & spices.','Add paneer; finish with cream.']
      }),
      R({name:'Kadhi Pakora', course:'Main', region:'North', diet:'Veg', time:45, spice:2, popular:7,
        tags:['Yogurt curry'],
        ingredients:['Curd 1.5 cups','Besan 3 tbsp','Turmeric','Kasuri methi','Pakora batter: besan, onion, chili','Tadka: mustard, fenugreek, curry leaves'],
        steps:['Whisk curd+besan+water; simmer with spices.','Fry pakoras; add to kadhi.','Temper & serve with rice.']
      }),
      R({name:'Aloo Gobi', course:'Main', region:'North', diet:'Vegan', time:25, spice:2, popular:8,
        tags:['Dry sabzi'],
        ingredients:['Cauliflower florets','Potatoes','Turmeric','Cumin','Ginger','Garam masala','Coriander'],
        steps:['Saut√© cumin & ginger.','Add potatoes, then gobi with spices; cook covered.']
      }),

      // Mains ‚Äì Non-Veg
      R({name:'Butter Chicken', course:'Main', region:'North', diet:'Non-Veg', time:45, spice:2, popular:10,
        tags:['Murgh Makhani','Creamy'],
        ingredients:['500g chicken tikka pieces','Tomato puree','Butter & cream','Cashews','Kashmiri chili','Garam masala'],
        steps:['Grill or pan‚Äësear marinated chicken.','Cook makhani gravy; add chicken; simmer till silky.']
      }),
      R({name:'Chicken Biryani (Hyderabadi)', course:'Rice', region:'South', diet:'Non-Veg', time:60, spice:4, popular:10,
        tags:['Dum','Aromatic'],
        ingredients:['500g chicken in biryani marinade','2 cups basmati rice','Whole spices','Fried onions','Mint & coriander','Ghee','Saffron milk'],
        steps:['Parboil rice with spices.','Layer marinated chicken, rice, fried onions, herbs, saffron.','Seal & dum 30‚Äì35 mins.']
      }),
      R({name:'Rogan Josh', course:'Main', region:'North', diet:'Non-Veg', time:55, spice:3, popular:8,
        tags:['Kashmiri'],
        ingredients:['500g mutton','Yogurt','Kashmiri chili','Fennel & dry ginger powder','Whole spices'],
        steps:['Brown mutton; add yogurt‚Äëspice mix.','Slow cook till tender and red‚Äëhued.']
      }),
      R({name:'Goan Fish Curry', course:'Main', region:'Coastal', diet:'Non-Veg', time:30, spice:3, popular:8,
        tags:['Coconut','Tangy'],
        ingredients:['500g firm fish','Coconut & red chili paste','Tamarind or kokum','Mustard seeds','Curry leaves'],
        steps:['Blend masala.','Simmer curry; add fish; cook 6‚Äì8 mins.']
      }),
      R({name:'Egg Curry', course:'Main', region:'Pan-India', diet:'Non-Veg', time:30, spice:2, popular:8,
        tags:['Budget','Quick'],
        ingredients:['6 boiled eggs','Onion‚Äëtomato masala','Ginger‚Äëgarlic','Garam masala'],
        steps:['Score eggs & sear lightly.','Simmer in masala 8‚Äì10 mins.']
      }),

      // Breads
      R({name:'Garlic Naan (Tawa)', course:'Bread', region:'North', diet:'Veg', time:40, spice:0, popular:9,
        tags:['Leavened'],
        ingredients:['2 cups maida','Curd 1/3 cup','Baking powder 1 tsp','Sugar 1 tsp','Salt','Garlic & coriander','Ghee/Butter'],
        steps:['Make soft dough; rest 1 hr.','Roll tear‚Äëdrop; press garlic‚Äëcoriander.','Cook on hot tawa; brush butter.']
      }),
      R({name:'Tawa Roti/Phulka', course:'Bread', region:'Pan-India', diet:'Vegan', time:25, spice:0, popular:8,
        tags:['Everyday'],
        ingredients:['2 cups atta','Water','Salt (optional)'],
        steps:['Knead soft dough; rest 20 mins.','Roll thin; cook on tawa; puff on flame.']
      }),
      R({name:'Aloo Paratha', course:'Bread', region:'North', diet:'Veg', time:35, spice:2, popular:9,
        tags:['Stuffed'],
        ingredients:['Atta dough','Mashed spiced potato','Ghee','Pickle (to serve)'],
        steps:['Stuff potato into small dough ball.','Roll gently; roast with ghee both sides.']
      }),

      // Rice & One‚Äëpots
      R({name:'Veg Biryani', course:'Rice', region:'Pan-India', diet:'Veg', time:55, spice:3, popular:9,
        tags:['Dum','Festive'],
        ingredients:['Mixed vegetables','2 cups basmati rice','Biryani masala','Fried onions','Mint & coriander','Saffron milk','Ghee'],
        steps:['Parboil rice.','Layer veggies & rice with herbs and saffron.','Dum cook 25‚Äì30 mins.']
      }),
      R({name:'Jeera Rice', course:'Rice', region:'North', diet:'Vegan', time:15, spice:1, popular:8,
        tags:['Everyday'],
        ingredients:['1 cup basmati','Cumin 1 tsp','Ghee/Oil','Bay leaf'],
        steps:['Temper cumin.','Add cooked rice; toss aromatic.']
      }),
      R({name:'Lemon Rice', course:'Rice', region:'South', diet:'Vegan', time:15, spice:1, popular:8,
        tags:['Tart','Lunchbox'],
        ingredients:['Cooked rice 3 cups','Mustard & urad dal','Curry leaves','Peanuts','Turmeric','Lemon juice'],
        steps:['Make tempering with nuts & spices.','Mix into rice; finish with lemon.']
      }),

      // Snacks & Street food
      R({name:'Samosa', course:'Snack', region:'North', diet:'Veg', time:60, spice:3, popular:10,
        tags:['Crispy','Street'],
        ingredients:['Maida dough','Spiced potato‚Äëpea filling','Ajwain','Oil for fry'],
        steps:['Make stiff dough.','Fill cones with masala.','Fry low‚Äëmedium till blistered.']
      }),
      R({name:'Pav Bhaji', course:'Snack', region:'West', diet:'Veg', time:35, spice:3, popular:10,
        tags:['Mumbai','Buttery'],
        ingredients:['Mixed veggies','Onion‚Äëtomato','Pav bhaji masala','Butter','Pavs'],
        steps:['Mash veggies in masala with butter.','Toast pav with butter; serve with onions & lemon.']
      }),
      R({name:'Vada Pav', course:'Snack', region:'West', diet:'Veg', time:30, spice:3, popular:9,
        tags:['Street'],
        ingredients:['Potato vada','Besan batter','Garlic chutney','Pavs'],
        steps:['Dip vadas; fry crisp.','Assemble in pav with chutneys.']
      }),
      R({name:'Pakora (Onion Bhaji)', course:'Snack', region:'Pan-India', diet:'Vegan', time:25, spice:2, popular:8,
        tags:['Tea‚Äëtime'],
        ingredients:['Onion slices','Besan','Ajwain','Chili & turmeric','Water','Salt'],
        steps:['Make thick batter; coat onions.','Fry small clusters till crisp.']
      }),

      // Sambar/Rasam
      R({name:'Sambar', course:'Main', region:'South', diet:'Vegan', time:40, spice:2, popular:9,
        tags:['Lentil stew'],
        ingredients:['Toor dal 1/2 cup','Mixed veg','Tamarind','Sambar powder','Mustard','Curry leaves'],
        steps:['Cook dal.','Boil veggies with sambar powder.','Combine with tamarind; temper.']
      }),
      R({name:'Rasam', course:'Main', region:'South', diet:'Vegan', time:20, spice:2, popular:8,
        tags:['Peppery','Digestive'],
        ingredients:['Tomatoes','Tamarind','Rasam powder','Garlic (optional)','Mustard','Curry leaves'],
        steps:['Boil tamarind‚Äëtomato with spices.','Temper & serve hot.']
      }),

      // Desserts
      R({name:'Gulab Jamun', course:'Dessert', region:'North', diet:'Veg', time:45, spice:0, popular:10,
        tags:['Festive'],
        ingredients:['Khoya/milk powder dough','Sugar syrup with cardamom','Rose water'],
        steps:['Knead soft dough; rest.','Fry on low till brown.','Soak in warm syrup.']
      }),
      R({name:'Kheer (Rice Pudding)', course:'Dessert', region:'Pan-India', diet:'Veg', time:45, spice:0, popular:9,
        tags:['Creamy'],
        ingredients:['Full‚Äëfat milk 1L','Rice 1/4 cup','Sugar','Cardamom','Nuts'],
        steps:['Simmer milk & rice till thick.','Sweeten; add cardamom & nuts.']
      }),
      R({name:'Jalebi', course:'Dessert', region:'North', diet:'Veg', time:60, spice:0, popular:8,
        tags:['Crisp','Syrupy'],
        ingredients:['Fermented maida batter','Sugar syrup','Ghee/Oil'],
        steps:['Pipe spirals into hot oil.','Fry & dip into syrup.']
      }),
      R({name:'Rasgulla', course:'Dessert', region:'East', diet:'Veg', time:60, spice:0, popular:8,
        tags:['Spongy'],
        ingredients:['Fresh chenna','Sugar syrup'],
        steps:['Knead chenna; roll balls.','Boil in syrup till doubled.']
      }),
      R({name:'Sooji Halwa (Sheera)', course:'Dessert', region:'North', diet:'Veg', time:20, spice:0, popular:8,
        tags:['Quick'],
        ingredients:['Rava 1 cup','Ghee 1/3 cup','Sugar 3/4 cup','Water/Milk 2.5 cups','Cardamom'],
        steps:['Roast rava in ghee.','Add hot water/milk & sugar; stir till glossy.']
      }),

      // Beverages
      R({name:'Masala Chai', course:'Beverage', region:'Pan-India', diet:'Veg', time:10, spice:1, popular:10,
        tags:['Tea'],
        ingredients:['Water 1 cup','Milk 1/2 cup','Tea leaves 1.5 tsp','Ginger','Cardamom','Sugar'],
        steps:['Boil water with spices.','Add tea; simmer.','Pour milk; boil once; strain.']
      }),
      R({name:'Mango Lassi', course:'Beverage', region:'North', diet:'Veg', time:10, spice:0, popular:8,
        tags:['Cooling'],
        ingredients:['Ripe mango 1 cup','Curd 3/4 cup','Sugar/Honey','Cardamom','Ice'],
        steps:['Blend till creamy; serve chilled.']
      }),
    ];

    // Utility to normalize recipe objects with defaults
    function R(r){ return {id:slug(r.name), servings:r.servings||2, difficulty:r.difficulty||lvl(r.time), notes:r.notes||'', ...r}; }
    function lvl(t){ if(t<=15) return 'Easy'; if(t<=35) return 'Medium'; return 'Advanced'; }
    function slug(s){ return s.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,''); }

    // --- State --------------------------------------------------------------
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => [...el.querySelectorAll(sel)];
    const grid = $('#grid');
    const empty = $('#empty');
    const modal = $('#modal');
    const quickChips = $('#quickChips');

    const state = {
      q:'', course:'', diet:'', region:'', sort:'az', favourites: new Set(JSON.parse(localStorage.getItem('favs')||'[]'))
    };

    // --- Render Controls ----------------------------------------------------
    const chips = [
      {key:'fav', label:'Favourites ‚òÖ'},
      {key:'veg', label:'Veg'},
      {key:'nonveg', label:'Non‚ÄëVeg'},
      {key:'quick', label:'‚â§ 20 min'},
      {key:'breakfast', label:'Breakfast'},
      {key:'snack', label:'Snacks'},
      {key:'dessert', label:'Desserts'},
    ];

    chips.forEach(c=>{
      const b = document.createElement('button');
      b.className='chip'; b.textContent=c.label; b.dataset.key=c.key;
      b.addEventListener('click',()=>{ b.classList.toggle('active'); applyFilters(); });
      quickChips.appendChild(b);
    });

    // Controls listeners
    $('#q').addEventListener('input', e=>{ state.q=e.target.value.trim().toLowerCase(); applyFilters(); });
    $('#course').addEventListener('change', e=>{ state.course=e.target.value; applyFilters(); });
    $('#diet').addEventListener('change', e=>{ state.diet=e.target.value; applyFilters(); });
    $('#region').addEventListener('change', e=>{ state.region=e.target.value; applyFilters(); });
    $('#sort').addEventListener('change', e=>{ state.sort=e.target.value; applyFilters(); });

    // --- Filtering & Sorting -----------------------------------------------
    function applyFilters(){
      let list = RECIPES.slice();
      const chipOn = key => $(`.chip[data-key="${key}"]`).classList.contains('active');

      // search
      if(state.q){
        list = list.filter(r=> r.name.toLowerCase().includes(state.q) || r.ingredients.join(' ').toLowerCase().includes(state.q));
      }
      if(state.course) list = list.filter(r=> r.course===state.course);
      if(state.diet) list = list.filter(r=> r.diet===state.diet);
      if(state.region) list = list.filter(r=> r.region===state.region);

      if(chipOn('veg')) list = list.filter(r=> r.diet==='Veg' || r.diet==='Vegan');
      if(chipOn('nonveg')) list = list.filter(r=> r.diet==='Non-Veg');
      if(chipOn('quick')) list = list.filter(r=> r.time<=20);
      if(chipOn('breakfast')) list = list.filter(r=> r.course==='Breakfast');
      if(chipOn('snack')) list = list.filter(r=> r.course==='Snack');
      if(chipOn('dessert')) list = list.filter(r=> r.course==='Dessert');
      if(chipOn('fav')) list = list.filter(r=> state.favourites.has(r.id));

      // Sort
      list.sort((a,b)=>{
        switch(state.sort){
          case 'time': return a.time-b.time;
          case 'spice': return b.spice-a.spice;
          case 'popular': return b.popular-a.popular;
          default: return a.name.localeCompare(b.name);
        }
      });

      renderCards(list);
    }

    // --- Cards --------------------------------------------------------------
    function renderCards(list){
      grid.innerHTML='';
      if(!list.length){ empty.hidden=false; return; } else empty.hidden=true;

      const frag = document.createDocumentFragment();
      list.forEach(r=> frag.appendChild(card(r)) );
      grid.appendChild(frag);
    }

    function card(r){
      const el = document.createElement('article');
      el.className='card';
      el.innerHTML = `
        ${r.popular>=10?'<span class="ribbon">Popular</span>':''}
        <div class="meta">
          <span class="badge">${r.course}</span>
          <span class="badge">${r.region}</span>
          <span class="badge">${r.difficulty}</span>
        </div>
        <h3>${r.name}</h3>
        <div class="meta">
          <span title="Diet" class="dot ${r.diet==='Non-Veg'?'nonveg':''}"></span> ${r.diet}
          <span>‚Ä¢ ‚è±Ô∏è ${r.time} min</span>
          <span>‚Ä¢ üå∂Ô∏è <span class="spice">${'‚òÖ'.repeat(r.spice)}${'‚òÜ'.repeat(5-r.spice)}</span></span>
          <span>‚Ä¢ üë• ${r.servings}</span>
        </div>
        <div class="tags">${r.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
        <div class="actions">
          <button data-act="view" data-id="${r.id}">View Recipe</button>
          <button class="ghost" data-act="copy" data-id="${r.id}">Copy</button>
          <button class="like" data-act="fav" data-id="${r.id}">‚òÖ</button>
          <button class="danger" data-act="del" data-id="${r.id}">Clear</button>
        </div>
      `;

      el.addEventListener('click', e=>{
        const btn = e.target.closest('button'); if(!btn) return;
        const id = btn.dataset.id; const act = btn.dataset.act; const rec = RECIPES.find(x=>x.id===id);
        if(act==='view') openModal(rec);
        if(act==='fav') toggleFav(id, el);
        if(act==='copy') copyIngredients(rec);
        if(act==='del') clearFilters();
      });

      // set fav state
      if(state.favourites.has(r.id)) el.querySelector('[data-act="fav"]').textContent='‚òÖ Saved';
      return el;
    }

    function clearFilters(){
      $('#q').value=''; state.q='';
      ['course','diet','region','sort'].forEach(id=>{ if(id==='sort') $('#'+id).value='az'; else $('#'+id).value=''; });
      $$('.chip.active').forEach(c=>c.classList.remove('active'));
      applyFilters();
    }

    // --- Modal --------------------------------------------------------------
    const mTitle = $('#mTitle'), mIngr=$('#mIngr'), mSteps=$('#mSteps'), mMeta=$('#mMeta'), mNotes=$('#mNotes');
    $('#closeBtn').onclick=()=>modal.close();

    function openModal(r){
      mTitle.textContent = r.name;
      mIngr.innerHTML = r.ingredients.map(i=>`<li>${i}</li>`).join('');
      mSteps.innerHTML = r.steps.map(s=>`<li>${s}</li>`).join('');
      mMeta.textContent = `${r.course} ‚Ä¢ ${r.region} ‚Ä¢ ${r.diet} ‚Ä¢ ${r.time} min ‚Ä¢ ${r.difficulty}`;
      mNotes.textContent = r.notes || '‚Äî';
      modal.showModal();
      // Attach for copy/print
      $('#copyBtn').onclick=()=>copyIngredients(r);
      $('#printBtn').onclick=()=>printRecipe(r);
    }

    function copyIngredients(r){
      const text = `${r.name} ‚Äì Ingredients\n\n` + r.ingredients.map(i=>`‚Ä¢ ${i}`).join('\n');
      navigator.clipboard.writeText(text).then(()=>{
        toast('Ingredients copied');
      });
    }

    function printRecipe(r){
      const w = window.open('', '_blank');
      w.document.write(`<!DOCTYPE html><html><head><title>${r.name} ‚Äì Recipe</title><meta charset="utf-8"><style>
        body{font-family:system-ui,Segoe UI,Roboto,Arial; padding:24px}
        h1{margin:0 0 6px}
        .muted{color:#555}
      </style></head><body><h1>${r.name}</h1>
    <div class="muted">${r.course} ‚Ä¢ ${r.region} ‚Ä¢ ${r.diet} ‚Ä¢ ‚è±Ô∏è ${r.time} min ‚Ä¢ ${r.difficulty}</div>
    <h3>Ingredients</h3>
    <ul>${r.ingredients.map(i=>`<li>${i}</li>`).join('')}</ul>
    <h3>Steps</h3>
    <ol>${r.steps.map(s=>`<li>${s}</li>`).join('')}</ol>
  </body></html>`);
  w.document.close(); w.focus(); w.print();
}

function toggleFav(id, cardEl){
  if(state.favourites.has(id)) state.favourites.delete(id); else state.favourites.add(id);
  localStorage.setItem('favs', JSON.stringify([...state.favourites]));
  const b = cardEl.querySelector('[data-act="fav"]');
  b.textContent = state.favourites.has(id) ? '‚òÖ Saved' : '‚òÖ';
}

// --- Tiny Toast ---------------------------------------------------------
let toastT; function toast(msg){
  clearTimeout(toastT);
  let t = document.getElementById('toast');
  if(!t){ t = document.createElement('div'); t.id='toast'; document.body.appendChild(t);
    Object.assign(t.style,{position:'fixed',bottom:'20px',left:'50%',transform:'translateX(-50%)',padding:'10px 14px',background:'#111537',color:'#e8ebff',border:'1px solid #323975',borderRadius:'12px',boxShadow:'var(--shadow)',zIndex:99});
  }
  t.textContent = msg; t.style.opacity='1'; t.style.transition='opacity .3s ease';
  toastT = setTimeout(()=>{ t.style.opacity='0'; }, 1400);
}

// Init
applyFilters();

  </script>
</body>
</html>
